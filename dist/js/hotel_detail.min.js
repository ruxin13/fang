require.config({paths:{common:"common.min",jquery:"jquery-3.2.1",swiper:"swiper.min",gearDate:"gearDate"}}),define(["common","jquery","swiper","gearDate"],function(e,t,n,i){e.init();var d={server:{dev:"//dev.xiangdao.info",pro:"//www.xiangdao.info"},env:"dev",videoIndexArr:[]};d.id=e.parseQueryString().hotelId,d.parseTime=function(e){if(e){e=new Date(e);return e.getFullYear().toString().substring(2)+"\u5e74"+(e.getMonth()+1)+"\u6708"+e.getDate()+"\u65e5"}return""};new n(".swiper-container-bed",{slidesPerView:"auto",spaceBetween:30,init:!1}),new n("#nearbyScene",{slidesPerView:2.3,spaceBetween:10,init:!1});d.q=function(e){return document.querySelector(e)},d.init=function(){d.initDate();new n(".swiper-album",{slidesPerView:2.5,spaceBetween:20,init:!1});t.ajax({url:d.server[d.env]+"/xiangdao-api/api/news/hotel_details/"+d.id,method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({hotelId:d.id}),success:function(e){var t,n,i,a,o,r,s,l,c;console.log(e),0===e.status&&(c=e.json,t=d.q("#playVideo"),d.q("#imgList"),t.src=c.video,t.poster=c.cover,t.e(function(){t.play(),t.st("controls","controls")}),n=d.q(".hc-tit"),i=d.q(".hc-inf"),a=d.q("#content"),o=d.q("#validDate"),s=d.q("#bookingNotice"),r=d.q("#housePolicy"),e=d.q(".hc-tags"),n.innerText=c.hotelTitle,i.innerText=c.hotelName,r.innerHTML=c.housePolicy,a.innerHTML=c.content,s.innerHTML=c.bookingNotice,c.hotelTagName&&(s=c.hotelTagName.split(","),l="",s.forEach(function(e){l+='<div class="hc-tag">'+e+"</div>"}),e.innerHTML=l),c.validBeginTime&&c.validEndTime&&o&&(e=d.parseTime(c.validBeginTime),c=d.parseTime(c.validEndTime),o.it(e+"-"+c)))}})},d.initDate=function(){var e=new GearDate,t=new GearDate;e.init({trigger:"#firstSelect",startInput:"#startDate",endInput:"#endDate",totalDays:"#totalDays",totalMonth:12}),t.init({trigger:"#secondSelect",startInput:"#startDate2",endInput:"#endDate2",totalDays:"#totalDays2",totalMonth:24})};var a=document.querySelectorAll(".pan-showall");if(a&&0<a.length)for(var o=0;o<a.length;o++)a[o].addEventListener("click",function(){var e=this.previousElementSibling;e&&e.classList.add("showAll"),this.style.display="none"},!1);var r=document.querySelectorAll(".pan-showall2");if(r&&0<r.length)for(var s=0;s<r.length;s++)r[s].addEventListener("click",function(){var e=this.previousElementSibling;"1"!==this.dataset.switch?(this.innerText="\u6536\u8d77 >>",this.dataset.switch="1",e&&e.classList.add("showAll")):(this.innerText="\u8be6\u60c5 >>",this.dataset.switch="0",e&&e.classList.remove("showAll"))},!1);var l=document.querySelectorAll(".link");if(l&&0<l.length)for(var c=0;c<l.length;c++)l[c].addEventListener("click",function(){openApp()},!1);d.init()});