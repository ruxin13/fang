require.config({paths:{common:"common.min",jquery:"jquery-3.2.1",swiper:"swiper.min"}}),define(["common","jquery","swiper"],function(i,o,f){i.init();var y,T,L={server:{dev:"//dev.xiangdao.info",pro:"//www.xiangdao.info"},rType:{10:{name:"\u5355\u4eba\u8ba2\u5e8a\u4f4d"},11:{name:"\u5355\u4eba\u8ba2\u6574\u95f4"},12:{name:"\u53cc\u4eba\u8ba2\u6574\u95f4"},13:{name:"\u4e09\u4eba\u8ba2\u6574\u95f4"},14:{name:"\u56db\u4eba\u8ba2\u6574\u95f4"},20:{name:"\u8ba2\u6574\u95f4"},30:{name:"\u8ba2\u6574\u5957"},40:{name:"\u8ba2\u6574\u680b"}},fType:{1:"\u5305\u4e09\u9910",2:"\u53ef\u505a\u996d",3:"\u4e0d\u5305\u5403\u4e0d\u53ef\u505a\u996d"}};function E(i){return document.querySelector(i)}function w(){var i=document.documentElement.scrollTop||document.body.scrollTop,n=document.body,e=n.style;e.position="fixed",e.top=-i+"px",e.left="0",e.right="0",e.bottom="0",n.dataset.st=i.toString()}function k(i){document.body.style.position="static",window.scroll(0,i||document.body.dataset.st)}L.env="dev",L.videoIndexArr=[],L.id=i.parseQueryString().id,L.parseTime=function(i){if(i){i=new Date(i);return i.getFullYear().toString().substring(2)+"\u5e74"+(i.getMonth()+1)+"\u6708"+i.getDate()+"\u65e5"}return""},L.parseDateForComment=function(i){i=new Date(i);return(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-"+(i.getDate()<10?"0"+i.getDate():i.getDate())+" "+(i.getHours()<10?"0"+i.getHours():i.getHours())+":"+(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())},L.init=function(){o.ajax({url:L.server[L.env]+"/xiangdao-api/api/news/hotel_details/"+L.id,method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({roomId:L.id}),success:function(i){var n,e,t,a,s,o,l,c,d,r,m,p,v,g,u,h,f;console.log(i),0===i.status&&(f=i.json,n=E("#playVideo"),h=E("#videoFullScreen"),n.src=f.video,n.poster=f.cover,n.oncanplay=function(){n.play()},h.addEventListener("click",function(){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()},!1),e=E(".hc-tit"),t=E(".hc-inf"),a=E("#content"),s=E("#validDate"),c=E("#bookingNotice"),o=E("#housePolicy"),l=E(".top-tags-l"),m=E(".pe-list"),i=E("#areaAddress"),h=E("#priceRemark"),e.innerText=f.hotelTitle,t.innerText=f.hotelName,f.housePolicy&&o?o.innerHTML=f.housePolicy:E("#housePolicyEl").style.display="none",f.content&&a?(a.innerHTML=f.content,E("#allContent").innerHTML=f.content,E(".ct-back").addEventListener("click",function(){E(".ct").style.display="none",k()},!1)):E("#contentEl").style.display="none",f.bookingNotice&&c?a.innerHTML=f.bookingNotice:E("#bookingNoticeEl").style.display="none",c.innerHTML=f.bookingNotice,f.hotelTagName&&(c=f.hotelTagName.split(","),r=d="",c.forEach(function(i,n){n<4?d+='<div class="top-tag">'+i+"</div>":E(".top-tags-r").style.display="block",r+='<div class="top-tag-pop">'+i+"</div>"}),l.innerHTML=d,m.innerHTML=r),i&&(i.innerText=f.locationProvinceName+f.locationCityName+f.locationTownName),f.validBeginTime&&f.validEndTime&&s&&(m=L.parseTime(f.validBeginTime),i=L.parseTime(f.validEndTime),s.it(m+"-"+i)),h&&(h.innerHTML=f.priceRemark),L.getRoomsList(null,null,"1",L.id,function(i){i?E("#hasFood").innerHTML=i:E("#hasFoodWrap").style.display="none",L.getRoomsList(null,null,"1,2,3",L.id,function(i){i?E("#noFood").innerHTML=i:E("#noFoodWrap").style.display="none",L.openRoom(),L.closeRoom()})}),f.hotelIcon&&f.hotelIconList&&0<f.hotelIconList.length&&(p="",v=f.hotelIcon.split(","),f.hotelIconList.forEach(function(e){p+='<div class="pt-group">\n                                                    <div class="pt-tit"><img class="pt-yqss" src="'+e.typeUrl+'" alt />'+e.typeName+'</div>\n                                                    <div class="pt-con">',v.forEach(function(i){var n=i.split("-");~~n[0]!=~~e.type||(i=e.list)&&0<i.length&&i.forEach(function(i){~~n[1]==~~i.iconSeq&&(p+='<div class="pt-li">\n                                                                <img class="pt-img" src="'+i.iconUrl+'" alt/>\n                                                                <div class="pt-name">'+i.iconName+"</div>\n                                                            </div>")})}),p+="</div></div>"}),E("#insWrap").innerHTML=p),f.faqList&&0<f.faqList.length?(g="",f.faqList.forEach(function(i){g+='<div class="pan-question">\n                                            <div class="pq-ask">'+i.issue+'</div>\n                                            <div class="pq-ans"><span>'+i.reply+"</span>\n                                            </div>\n                                        </div>"}),E("#faqWrap").innerHTML=g):E("#faqEl").style.display="none",f.aqList&&0<f.aqList.length&&0<f.aqCount&&(u="",f.aqList.forEach(function(i){u+='<div class="ask-li">\n                                        <div class="ask-l">\u95ee</div>\n                                        <div class="ask-c">'+i.title+'</div>\n                                        <div class="ask-r">'+i.replyCount+"\u4e2a\u56de\u7b54</div>\n                                    </div>"}),u+='<div class="ask-btn">\u67e5\u770b\u5168\u90e8</div>',E("#askList").innerHTML=u,E(".ask-nodata").style.display="none"),f.commentCount?(L.commentList=f.commentList,f.commentList.forEach(function(i){i.totalList=i.list}),L.renderCommentList()):(h="",h+='<div class="comment-nodata"><img class="comment-nodata-icon" src="img/comment_nodata.png" alt /><div class="comment-nodata-tit">\u6682\u65e0\u8bc4\u8bba</div><div class="comment-nodata-stit">\u8fd8\u6ca1\u6709\u623f\u5ba2\u5bf9\u8be5\u623f\u6e90\u53d1\u51fa\u8bc4\u8bba</div></div>',E("#commentList").innerHTML='<div class="comment-nodata"><img class="comment-nodata-icon" src="img/comment_nodata.png" alt /><div class="comment-nodata-tit">\u6682\u65e0\u8bc4\u8bba</div><div class="comment-nodata-stit">\u8fd8\u6ca1\u6709\u623f\u5ba2\u5bf9\u8be5\u623f\u6e90\u53d1\u51fa\u8bc4\u8bba</div></div>'),L.locationProvinceName=f.locationProvinceName,L.locationCityName=f.locationCityName,L.locationTownName=f.locationTownName,L.getNear(0<~~f.locationDistrict?f.locationDistrict:f.locationTown),(f=E("#allHouse"))&&f.addEventListener("click",function(){E(".ct").style.display="flex",w()},!1))}}),L.bindTag1(),L.onAMapLoaded()},L.openRoom=function(){var i=document.querySelectorAll(".nli-inr");i&&0<i.length&&i.forEach(function(i){i.addEventListener("click",function(i){E(".dp-wrap").style.display="block",w(),L.getBed(i.target.dataset.id,function(){})},!1)})},L.closeRoom=function(){var i=E("#houseClose");i&&i.addEventListener("click",function(){var n=E(".dp-wrap");n&&(n.classList.remove("slideUp"),n.classList.add("slideDown"),y.removeAllSlides(),y.detachEvents(),y=null,T.detachEvents(),n.addEventListener("webkitAnimationEnd",function(i){"slideOut"===i.animationName&&(n.style.display="none",n.classList.remove("slideDown"),n.classList.add("slideUp"),k())}))},!1)},L.bindTag1=function(){var i=E(".hc-tags"),n=E(".pe-close");i&&i.addEventListener("click",function(){E(".pe")&&(E(".pe").style.display="flex"),w()},!1),n&&n.addEventListener("click",function(){E(".pe")&&(E(".pe").style.display="none"),k()},!1)},L.bindTag2=function(){var i=E(".dmt-tags"),n=E(".pe2-close");i&&i.addEventListener("click",function(){E(".pe2")&&(E(".pe2").style.display="flex"),w()},!1),n&&n.addEventListener("click",function(){E(".pe2")&&(E(".pe2").style.display="none"),k()},!1)},L.getBed=function(i,u){var h=E(".swiper-pagination-pop");o.ajax({url:L.server[L.env]+"/xiangdao-api/api/news/hotel_room_details/"+i,method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({roomId:i}),success:function(i){var s,t,e,a,n,o,l,c,d,r,m,p,v,g;console.log(i),0===i.status&&((s=i.json).albumList&&0<s.albumList.length&&((n=s.albumList)&&0<n.length&&(t="",n.forEach(function(e,i){var n;!e.url||0<(n=e.url.split(",")).length&&n.forEach(function(i,n){2===e.type&&(t+='<div class="swiper-slide">',t+='<img class="head-img-li" src="'+i+'" alt />',t+="</div>")}),0===i&&1===e.type&&h.classList.add("video")}),E("#headImgs").innerHTML=t,y=new f(".swiper-container-head",{pagination:{el:".swiper-pagination-pop",type:"fraction"},lazy:!0,autoplay:{delay:3e3,disableOnInteraction:!1},on:{transitionEnd:function(){var n=this;0<L.videoIndexArr.length?L.videoIndexArr.forEach(function(i){i.index===n.activeIndex?h.classList.add("video"):h.classList.remove("video")}):h.classList.remove("video");var i=document.querySelectorAll("video");if(i&&0<i.length)for(var e=0;e<i.length;e++)i[e].pause()}}}))),i=E("#roomTitle"),n=E("#roomTitle2"),i&&(i.innerText=s.roomTitle),n&&(n.innerText=s.roomTitle),s.roomTagName?(i=E(".pe2-list"),a=e="",(n=s.roomTagName.split(",")).forEach(function(i,n){n<4&&(e+='<div class="dmt-tag">'+i+"</div>"),a+='<div class="top-tag-pop">'+i+"</div>"}),3<n.length&&(e+='<img class="dmt-tag-more" src="img/icon_arrow_rs.png" alt />'),E("#roomTags").innerHTML=e,i.innerHTML=a):E("#roomTags").style.display="none",L.bindTag2(),o=[null,"\u5ba4","\u53a8","\u536b","\u5385","\u5385","\u4e66\u623f","\u9633\u53f0"],s.houseType&&(l="",m=s.houseType.split(","),c=[],m.forEach(function(i){var n=i.split("-"),i={};i.id=~~n[0],i.num=~~n[1],1===i.id&&(L.roomCount=i.num),c.push(i)}),c[3].num+=c[4].num,c.forEach(function(i,n){4!==n&&0<i.num&&(l+="/"+i.num+o[i.id])}),l=l.replace("/",""),E("#houseType").innerText=l),m=E("#roomArea"),s.roomArea&&m&&(m.innerText=s.roomArea),s.bedType&&(T=new f(".swiper-container-bed",{slidesPerView:"auto",spaceBetween:30,lazy:!0,init:!(d=[{id:1,name:"\u5927\u5e8a",icon:"icon_bed.png",bed:[],list:[null,"2*1.8m","2*1.5m","1.8*1.5m","2*2m","2*1.6m","2.2*2.2m"]},{id:2,name:"\u5355\u4eba\u5e8a",icon:"icon_sbed.png",bed:[],list:[null,"2*1m","2*1.2m","1.9*2m","2*0.8m","2*1.35m","2*1.1m","2*1.3m"]},{id:3,name:"\u53cc\u5c42\u5e8a",icon:"icon_dbed.png",bed:[],list:[null,"0.9*1.9m\u4e0a\uff0c1.2*1.9m\u4e0b","1.2*1.9m\u4e0a\uff0c1.5*1.9m\u4e0b","1.35*1.9m\u4e0a\uff0c1.5*1.9m\u4e0b","0.9*1.8m","1*1.9m","1.2*1.9m","1.8*1.2m"]},{id:4,name:"\u6c99\u53d1\u5e8a",icon:"icon_sofa.png",bed:[],list:[null,"2*1.2m","2*1.5m"]},{id:5,name:"\u5706\u5e8a",icon:"icon_cbed.png",bed:[],list:[null,"\u76f4\u5f842m","\u76f4\u5f842.2m"]}])}),(p=s.bedType.split(","))&&0<p.length&&p.forEach(function(i){var n=i.split("-");d.forEach(function(i){parseInt(n[0])===i.id&&i.bed.push(n)})}),r=E("#hcInfo2"),d.forEach(function(n){var e,i,t='<div class="hci-tli-wrap swiper-slide">\n                                                <div class="hci-tli">\n                                                    <img class="hci-icon" src="img/icon_guest.png" alt />\n                                                    <div class="hci-text"><span id="liveNumber">'+s.liveNumber+'</span>\u4e2a\u623f\u5ba2</div>\n                                                </div>\n                                            </div>\n                                            <div class="hci-tli-wrap swiper-slide">\n                                                <div class="hci-tli">\n                                                    <img class="hci-icon" src="img/icon_room.png" alt />\n                                                    <div class="hci-text"><span id="roomCount">'+L.roomCount+"</span>\u95f4\u5367\u5ba4</div>\n                                                </div>\n                                            </div>",a="";0<n.bed.length&&(e=0,n.bed.forEach(function(i){e+=parseInt(i[2])}),a+='<div class="hci-tli">\n',a+='<img class="hci-icon" src="img/'+n.icon+'" alt />',a+='<div class="hci-text">'+e+"\u5f20"+n.name+"</div></div>",a+='<div class="hci-trli">',n.bed.forEach(function(i){a+='<div class="hci-trli-row"><span>('+n.list[i[1]]+")</span>&times;"+i[2]+"</div>"}),a+="</div></div>\n",(i=document.createElement("div")).classList.add("hci-tli-wrap"),i.classList.add("swiper-slide"),i.innerHTML=a,r.innerHTML=t,r.appendChild(i))}),T.update(),T.init()),m=E("#roomBrief"),p=E("#roomBriefEl"),s.roomBrief&&p?m.innerHTML=s.roomBrief:p.style.display="none",s.houseIcon&&s.houseIconList&&0<s.houseIconList.length&&(v="",g=s.houseIcon.split(","),s.houseIconList.forEach(function(e){v+='<div class="pt-group">\n                                                    <div class="pt-tit"><img class="pt-yqss" src="'+e.typeUrl+'" alt />'+e.typeName+'</div>\n                                                    <div class="pt-con">',g.forEach(function(i){var n=i.split("-");~~n[0]!=~~e.type||(i=e.list)&&0<i.length&&i.forEach(function(i){~~n[1]==~~i.iconSeq&&(v+='<div class="pt-li">\n                                                                <img class="pt-img" src="'+i.iconUrl+'" alt/>\n                                                                <div class="pt-name">'+i.iconName+"</div>\n                                                            </div>")})}),v+="</div></div>"}),E("#houseIconWrap").innerHTML=v),"function"==typeof u&&u())}})},L.getNear=function(i){o.ajax({url:L.server[L.env]+"/xiangdao-api/api/news/search_list",method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({searchLocation:i,pageNo:1}),success:function(i){var n;console.log(i),0===i.status&&(i=i.json.result,(L.nearList=i)&&0<i.length&&(n="",i.forEach(function(e){var t,a,i;2===e.type&&(t="",a=[],e.tagName&&((i=e.tagName.split(",")).forEach(function(i,n){a.push(i),n<4&&(t+='<div class="sai-tro sai-tro-all" data-id="'+e.id+'">'+i+"</div>")}),i&&4<i.length&&(t+='<img class="sai-tro-more sai-tro-all" data-id="'+e.id+'" src="img/icon_arrow_rs.png" alt />'),e.tagList=a),n+='<div class="sa-li">\n                                        <div class="sai-t">\n                                            <div class="sai-tl">\n                                                <img class="sai-tl-img" src="'+e.cover+'" alt />\n                                                <div class="sai-tl-pos">'+e.locationProvinceName.replace(/\u7701/,"")+" \xb7 "+e.locationCityName.replace(/[\u5e02\u53bf\u533a]/g,"")+'</div>\n                                            </div>\n                                            <div class="sai-tr">'+t+'</div>\n                                        </div>\n                                        <div class="sai-st">'+e.name+'</div>\n                                        <div class="sai-tit">'+e.title+'</div>\n                                        <div class="sai-inf"><span><i>\uffe5</i>'+(e.monthReferPrice||(e.dayReferPrice?30*e.dayReferPrice:0))+"</span>\u8d77/"+("10"===e.reserveType?"\u4eba/":"")+L.rType[e.reserveType].name.slice(-2)+'/30\u665a</div>\n                                        <div class="sai-row">\n                                            <div class="sai-tags">\n                                            '+(e.foodType?'<div class="sai-tag-l">'+L.fType[e.foodType]+"</div>":"")+'\n                                            <div class="sai-tag-r '+(e.foodType?"":"sai-tag-single")+'">30\u665a\u8d77\u79df</div>\n                                            </div>\n                                            <div class="sai-detail">\u8be6\u60c5</div>\n                                        </div>\n                                    </div>')}),E("#saList").innerHTML=n,(i=document.querySelectorAll(".sai-tro-all"))&&0<i.length&&i.forEach(function(i){i.addEventListener("click",function(i){var e=i.target.dataset.id,i=L.nearList;i&&0<i.length&&i.forEach(function(i){var n;~~e==~~i.id&&(i=i.tagList,n="",i&&0<i.length&&(i.forEach(function(i){n+='<div class="top-tag-pop">'+i+"</div>"}),E(".pe3-list").innerHTML=n,E(".pe3").style.display="flex",E(".pe3-close").addEventListener("click",function(){E(".pe3").style.display="none"},!1)))})},!1)})))}})},L.renderCommentList=function(){var s,i=L.commentList;i&&0<i.length&&(s="",i.forEach(function(i){if(s+='<div class="comment-li" data-id="'+i.commentId+'">\n<div class="comment-li-wrap">                        <img class="comment-l" src="'+i.avatar+'" alt />\n                        <div class="comment-c">\n                            <div class="comment-name">'+i.nickName+'</div>\n                            <div class="comment-con">'+(i.content||"")+"</div>\n",i.images){var n=i.images.split(",");if(n&&0<n.length){for(var e='<div class="comment-imgs">',t=0;t<n.length;t++)e+='<img class="comment-img swiper-lazy" data-index="'+t+'" data-img="'+i.images+'" src="'+n[t]+'" alt />';s+=e+="</div>"}}var a;s+='<div class="comment-fun">\n                <div class="comment-time">'+L.parseDateForComment(i.createTime)+' \xb7 </div>\n                <div class="comment-btn-reply link">\u56de\u590dTA</div>\n                <img class="comment-btn-more link" src="img/icon_more_s.png" alt />\n           </div>',s+='</div>\n           <div class="comment-r link">\n               <img class="comment-like-icon" src="img/icon_like_g.png" alt />\n               <div class="comment-like-num">'+(0<i.likeCount?i.likeCount:"")+"</div>\n           </div>\n       </div>",i.totalList&&0<i.totalList.length&&(a="",a+='<div class="comment-reply">',i.totalList.forEach(function(i){a+='<div class="cop-li" data-id="'+i.commentId+'">\n              <img class="cop-l" src="'+i.avatar+'" alt />\n              <div class="cop-c">\n                   <div class="cop-name">'+i.nickName+(1===i.isAuthor?'<span class="cop-author">\u4f5c\u8005</span>':"")+'</div>\n                   <div class="cop-con">\n                        '+(i.parentNickName?'\u56de\u590d<span class="link" style="color:#3397C6"> @'+i.parentNickName+"</span>\uff1a":"")+(i.content||"")+"\n",i.images&&(a+='<span class="cop-con-show-img swiper-lazy" data-index="0" data-img="'+i.images+'"><img class="cop-con-icon" src="img/icon_img_s.png" alt /><span>\u67e5\u770b\u56fe\u7247</span></span>\n'),a+='                   </div>\n                   <div class="cop-fun">\n                        <div class="cop-time">'+L.parseDateForComment(i.createTime)+' \xb7 </div>\n                        <div class="cop-btn-reply link">\u56de\u590dTA</div>\n                        <img class="cop-btn-more link" src="img/icon_more_s.png" alt />\n                   </div>\n              </div>\n<div class="cop-r link"><img class="cop-like-icon" src="img/icon_like_g.png" alt /><div class="cop-like-num">'+(0<i.likeCount?i.likeCount:"")+"</div></div>         </div>\n"}),s+=a+="</div>"),0<i.childCommentCount-i.totalList.length&&(s+='<div class="cop-more" data-page="1" data-switch="off" data-id="'+i.commentId+'"><span class="cop-more-text">\u70b9\u51fb\u5c55\u5f00'+(4<i.childCommentCount-i.totalList.length?5:i.childCommentCount-i.totalList.length)+'\u6761\u56de\u590d</span><img class="cop-more-btn" src="img/icon_arrow_g2.png" alt /></div>'),o("#commentList").html(s)}))},L.getRoomsList=function(i,n,e,t,s){t={foodTypeStr:e,hotelId:t};i&&(t.rentBeginTime=i),n&&(t.rentEndTime=i),o.ajax({url:L.server[L.env]+"/xiangdao-api/api/news/hotel_room_list",method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(t),success:function(i){var a;console.log(i),0===i.status&&(i=i.json,a="",i&&0<i.length&&i.forEach(function(n){var i,e="",t="";!n.roomTagName||(i=n.roomTagName.split(","))&&0<i.length&&i.forEach(function(i){e+='<div class="nli-tag">'+i+"</div>"}),!n.reserveTypeStr||(i=n.reserveTypeStr.split(","))&&0<i.length&&i.forEach(function(i){t+='<div class="nli"><div class="nli-ml"><div class="nli-mlt">'+L.rType[i].name+'</div>\n                                                        <div class="nli-mlb">\u5355\u4ef7<span>\uffe5'+(n["monthReferPrice"+i]||0)+"</span>\u8d77/"+("10"===i?"\u4eba/":"")+L.rType[i].name.slice(-2)+'/30\u665a</div>\n                                                    </div><div class="nli-mr">\u9884\u8ba2</div></div>'}),a+='<div class="room-li" ><div class="nli-t">\n                                <img class="nli-tl" src="'+n.roomCover+'" alt/>\n                                <div class="nli-tr">\n                                    <div class="nli-tit">'+n.roomTitle+'</div>\n                                    <div class="nli-tags">'+e+'</div>\n                                    <div class="nli-inf">\n                                        <div class="nli-inl">\n                                            <p>\u9762\u79ef\u7ea6\u4e3a'+n.roomArea+'m<sup>2</sup></p>\n                                            <p class="nli-inline">\u4e0d\u53ef\u53d6\u6d88</p>\n                                            <p class="nli-inline">\u9700\u7b49\u5f85\u786e\u8ba4</p>\n                                        </div>\n                                        <div class="nli-inr" data-id="'+n.roomId+'">\u8be6\u60c5</div>\n                                    </div>\n                                </div></div>\n                                <div class="nli-m">'+t+"</div></div>\n                                "}),"function"==typeof s&&s(a))}})},L.onAMapLoaded=function(){var e=new AMap.Map("mapContainer",{zoom:11});console.log(L),AMap.plugin("AMap.Geocoder",function(){(new AMap.Geocoder).getLocation("\u6d77\u5357\u7701\u4e09\u4e9a\u5e02",function(i,n){var a;console.log(i,n),"complete"===i&&n.geocodes.length?(a=n.geocodes[0].location,e.setCenter([a.lng,a.lat]),L.lng=a.lng,L.lat=a.lat,n=new AMap.Marker({position:[a.lng,a.lat],anchor:"bottom-center"}),e.add(n),AMap.plugin(["AMap.PlaceSearch"],function(){new AMap.PlaceSearch({pageSize:6,pageIndex:1,datatype:"poi",city:L.locationCity,citylimit:!0,autoFitView:!0}).searchNearBy("\u706b\u8f66\u7ad9",[a.lng,a.lat],1e5,function(i,n){var e,t;n&&n.poiList&&n.poiList.pois&&0<n.poiList.pois.length&&(n=n.poiList.pois,e=[],n.forEach(function(i){e.push(i)}),t=(L.distance=e).sort(function(i,n){return i.distance-n.distance})[0],AMap.plugin("AMap.Driving",function(){var i=new AMap.Driving({policy:AMap.DrivingPolicy.LEAST_TIME}),n=[t.location.lng,t.location.lat],e=[a.lng,a.lat];i.search(n,e,function(i,n){n=n.routes[0].time;E("#distance").innerText="\u8ddd"+t.name+"\u9a7e\u8f66\u8ddd\u79bb"+t.distance/1e3+"\u516c\u91cc\uff0c\u7ea6"+parseInt(n/60)+"\u5206\u949f"})}))})})):console.log("\u83b7\u53d6\u7ecf\u7eac\u5ea6\u5931\u8d25")})})};var n=document.querySelectorAll(".pan-showall");if(n&&0<n.length)for(var e=0;e<n.length;e++)n[e].addEventListener("click",function(){var i=this.previousElementSibling;i&&i.classList.add("showAll"),this.style.display="none"},!1);var t=document.querySelectorAll(".pan-showall2");if(t&&0<t.length)for(var a=0;a<t.length;a++)t[a].addEventListener("click",function(){var i=this.previousElementSibling;"1"!==this.dataset.switch?(this.innerText="\u6536\u8d77 >>",this.dataset.switch="1",i&&i.classList.add("showAll")):(this.innerText="\u8be6\u60c5 >>",this.dataset.switch="0",i&&i.classList.remove("showAll"))},!1);var s=document.querySelectorAll(".link");if(s&&0<s.length)for(var l=0;l<s.length;l++)s[l].addEventListener("click",function(){openApp()},!1);L.init()});