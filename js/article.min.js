require.config({paths:{common:"common.min",jquery:"jquery-3.2.1"}}),define(["common","jquery"],function(i,n){var e={env:"dev",server:{dev:"//dev.xiangdao.info",pro:"//www.xiangdao.info"},parseDate:function(i){var n=new Date(i);return n.getFullYear()+"\u5e74"+(n.getMonth()+1)+"\u6708"+n.getDate()+"\u65e5"},parseDateComment:function(i){var n=new Date(i);return(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()<10?"0"+n.getDate():n.getDate())+" "+(n.getHours()<10?"0"+n.getHours():n.getHours())+":"+(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())},q:function(i){return document.querySelector(i)}};e.id=i.parseQueryString().id,i.init(),i.request({url:e.server[e.env]+"/xiangdao-api/api/news/article_details/"+e.id,method:"GET",success:function(i){var t=i.json,s=e.q(".header-img"),a=e.q(".articleTitle"),l=e.q(".articleTime"),c=e.q(".viewNum"),r=e.q("#articleContent"),o=e.q(".icon-praise"),d=e.q(".pr-txt span");s.src=t.detailsCover,a.innerText=t.title,t.publishDate&&(l.innerText="\u53d1\u5e03\u4e8e"+e.parseDate(t.publishDate)),t.lookNumber&&(c.innerText=t.lookNumber+"\u6b21\u89c2\u770b"),t.publishDate&&t.lookNumber&&(l.innerText+=" | "),r.innerHTML=t.content,d.innerText=t.likeCount,t.isLike?o.src="img/praised.png":o.src="img/praise.png",n.ajax({url:e.server[e.env]+"/xiangdao-api/api/news/article/"+e.id+"/house_list",method:"GET",dataType:"json",success:function(i){if(0===i.status){var t=i.json;if(t&&t.length>0){var s="";t.forEach(function(i){s+='<div class="vp-li" data-id="'+i.houseId+'">\n                <img class="vp-l" src="'+i.infoCover+'" alt />\n                <div class="vp-r">\n                    <div class="vp-st">'+i.profileStr+'</div>\n                    <div class="vp-ti">'+i.infoTitle+'</div>\n                    <div class="vp-price"><span>\uffe5<i>'+i.ruleMonthMoney+"</i></span>/\u6708</div>\n                </div>\n            </div>"}),e.q(".vp-list").innerHTML=s,1===t.length?(e.q(".vp-list").style.height="2.32rem",e.q(".show-all").style.display="none"):2===t.length?(e.q(".show-all").style.display="none",e.q(".vp-list").style.height="5.6rem"):e.q(".vp-list").style.height="5.6rem",n(".vp-li").on("click",function(){var i=n(this).data("id");location.href="house_details.html?houseId="+i})}else e.q(".vp-wrap").style.display="none"}}}),n.ajax({url:e.server[e.env]+"/xiangdao-api/api/news/comment_list",method:"POST",dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({bizId:e.id,bizType:2,pageNo:1}),success:function(i){var n=i.json.result,t="";n&&n.length>0?(e.q("#commentCount").innerText=" \xb7 "+i.json.totalCount,n.forEach(function(i){var n="",s="",a="";if(i.images){n+='<div class="cli-imgs">\n';var l=i.images.split(",");l&&l.length>0&&l.forEach(function(i){n+='<img class="cli-img" src="'+i+'" alt />'}),n+="</div>\n"}i.list&&i.list.length>0&&(s+='<div class="cli-reply">\n',i.list.forEach(function(i){s+='                        <div class="clr-li">\n                            <img class="clr-l" src="'+i.avatar+'" alt />\n                            <div class="clr-r">\n                                <div class="clr-name">'+i.nickName+'</div>\n                                <div class="clr-cont">'+(i.parentNickName?"\u56de\u590d"+i.parentNickName+": ":"")+i.content+'</div>\n                                <div class="clr-fun">\n                                    <div class="clr-fl">'+e.parseDateComment(i.createDate)+'</div>\n                                    <div class="clr-fr">\n                                        <div class="clrr-li link">\n                                            <img class="clrr-icon" src="img/icon_reply.png" alt />\n                                            <div class="clrr-text">\u56de\u590d</div>\n                                        </div>\n                                        <div class="clrr-li link">\n                                            <img class="clrr-icon" src="img/praise.png" alt />\n                                            <div class="clrr-text">'+(i.isLike?"\u5df2\u70b9\u8d5e":"\u70b9\u8d5e")+"</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n"}),s+="                    </div>"),a+='<div class="cli-fun">\n                        <div class="cf-l">'+e.parseDateComment(i.createDate)+'</div>\n                        <div class="cf-r">\n                            <div class="cf-ri link">\n                                <img class="cfr-icon" src="img/icon_reply.png" alt />\n                                <div class="cfr-text">'+(i.childCommentCount?i.childCommentCount:"\u56de\u590d")+'</div>\n                            </div>\n                            <div class="cf-ri link">\n                                <img class="cfr-icon" src="img/praise.png" alt />\n                                <div class="cfr-text">'+(i.likeCount?i.likeCount:"\u70b9\u8d5e")+"</div>\n                            </div>\n                        </div>\n                    </div>",t+='<div class="cli">\n                <img class="cli-l" src="'+i.avatar+'" alt />\n                <div class="cli-r">\n                    <div class="cli-name">'+i.nickName+'<img class="cli-report link" src="img/icon_alarm.png" alt /></div>\n                    <div class="cli-txt">'+i.content+"</div>\n"+n+s+a+"                </div>\n            </div>"})):t+='<div class="comment-nodata"><img class="comment-nodata-icon" src="img/comment_nodata.png" alt /><div class="comment-nodata-tit">\u6682\u65e0\u6d88\u606f</div><div class="comment-nodata-stit">\u6682\u65f6\u8fd8\u6ca1\u6536\u5230\u4efb\u4f55\u6d88\u606f</div></div>',e.q(".com-list").innerHTML=t;var s=document.querySelectorAll(".link");if(s&&s.length>0)for(var a=0;a<s.length;a++)s[a].addEventListener("click",function(){openApp()},!1)}})}});var t=document.querySelectorAll(".pan-showall");if(t&&t.length>0)for(var s=0;s<t.length;s++)t[s].addEventListener("click",function(){var i=this.previousElementSibling;i&&i.classList.add("showAll"),this.style.display="none"},!1);n(".show-all").on("click",function(){var i=n(this);i.hasClass("cols")?(i.removeClass("cols").find("span").text("\u6536\u8d77"),i.prev(".vp-list").addClass("showAll")):(i.addClass("cols").find("span").text("\u5c55\u5f00"),i.prev(".vp-list").removeClass("showAll"))});var a=document.querySelectorAll(".link");if(a&&a.length>0)for(var l=0;l<a.length;l++)a[l].addEventListener("click",function(){openApp()},!1)});